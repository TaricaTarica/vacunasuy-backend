<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Plan de Vacunacion</title>
</h:head>
<h:body>
	<h:form id="EnfermedadListarForm">
		<p:messages id="messages" showDetail="true" closable="true">
			<p:autoUpdate />
		</p:messages>
		<div>
			<p:dataTable id="PlanTabla" var="planVacunacion"
				value="#{planVacunacionBean.planesVacunaciones}" paginator="true" rows="6"
        		paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
				<f:facet name="header">Listado Planes de Vacunacion </f:facet>
				
				<p:column headerText="Nombre">
					<h:outputText value="#{planVacunacion.nombre}" />
				</p:column>
				<p:column headerText="Poblacion Objetivo">
					<h:outputText value="#{planVacunacion.poblacionObjetivo.name()}" />
				</p:column>
				<p:column headerText="Edad Minima">
					<h:outputText value="#{planVacunacion.edadMinima}" />
				</p:column>
				<p:column headerText="Edad Maxima">
					<h:outputText value="#{planVacunacion.edadMaxima}" />
				</p:column>
				<p:column headerText="Enfermedad">
					<h:outputText value="#{planVacunacion.enfermedad.nombre}" />
				</p:column>

				<f:facet name="footer">
					<div style="display: flex; align-items: center;justify-content: center;">
						<p:commandButton value="Buscar"
							actionListener="#{planVacunacionBean.reiniciarEnfermedad}"
							oncomplete="PF('enfermedadDialogBuscar').show()" />
						<p:spacer height="5px" />
						<p:commandButton value="Agregar Plan"
							actionListener="#{planVacunacionBean.reiniciarEnfermedad}"
							oncomplete="PF('planDialog').show()" />
					</div>
				</f:facet>
			</p:dataTable>
		</div>
	</h:form>

	<p:dialog id="planDlg" widgetVar="planDialog"
		header="Agregar Plan Vacunacion" modal="true" showEffect="fade"
		hideEffect="fade" resizable="false">

		<h:form id="dialogForm">
			
<p:panel header="Nuevo Plan" style="margin-bottom:10px;">
            <h:panelGrid columns="2" cellpadding="5">
                
                <h:outputLabel for="name" value="Nombre:"/>
            	<p:inputText id="name" value="#{planVacunacionBean.planVacunacion.nombre}" required="true"/>
                
                <h:outputLabel for="edadminima" value="Edad Minima"/>
            	<p:spinner id="edadminima" value="#{planVacunacionBean.planVacunacion.edadMinima}" required="true"/>
            	
            	<h:outputLabel for="edadmaxima" value="Edad Maxima" />
            	<p:spinner id="edadmaxima" value="#{planVacunacionBean.planVacunacion.edadMaxima}" required="true"/>
            	
            	<h:outputLabel for="poblacion" value="Poblacion Objetivo:"/>
                <p:selectOneMenu id="poblacion" value="#{planVacunacionBean.planVacunacion.poblacionObjetivo}" style="width:15rem">
                    <f:selectItem itemLabel="Seleccionar Poblacion" itemValue="" noSelectionOption="true"/>
                    <f:selectItems value="#{planVacunacionBean.poblaciones}"/>
                </p:selectOneMenu>
            	
            	 <h:outputLabel for="enfermedad" value="Enfermedad:"/>
                <p:selectOneMenu id="enfermedad" value="#{planVacunacionBean.nombreEnfermedad}" style="width:15rem">
                     <p:ajax listener="#{planVacunacionBean.cargarVacunas}" update="Vac"/>
                    <f:selectItem itemLabel="Seleccionar Enfermedad" itemValue="" noSelectionOption="true"/>
                    <f:selectItems value="#{planVacunacionBean.enfermedades}"/>
                </p:selectOneMenu>

                <h:outputLabel for="Vac" value="Vacunas:"/>
                <p:selectCheckboxMenu id="Vac" value="#{planVacunacionBean.nombreVacuna}" label="Seleccionar Vacunas" style="width: 15rem"
                                filter="true" filterMatchMode="startsWith" panelStyle="width: 15rem" scrollHeight="250">
            <f:selectItems value="#{planVacunacionBean.vacunas}"/>
        </p:selectCheckboxMenu>
            </h:panelGrid>
			
          
			<div style="display: flex; align-items: center;justify-content: center;">
            <p:commandButton  value="Cargar Plan" action="#{planVacunacionBean.agregarPlanVacunacion}"
                             icon="pi pi-check"/>
            </div>
        </p:panel>
	
		</h:form>

	</p:dialog>

	<p:dialog id="enfermedadDlgBuscar" widgetVar="enfermedadDialogBuscar"
		header="Buscar Enfermedad" modal="true" showEffect="fade"
		hideEffect="fade" resizable="false">

		<h:form id="dialogFormBuscar">

			
		</h:form>

	</p:dialog>

</h:body>
</html>