<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Plan de Vacunacion</title>
</h:head>
<h:body>
	<h:form id="EnfermedadListarForm">
		<p:messages id="messages" showDetail="true" closable="true">
			<p:autoUpdate />
		</p:messages>
		<div>
			<p:dataTable id="EnfermedadTabla" var="enfermedad"
				value="#{planVacunacionBean.enfermedades}" paginator="true" rows="6"
        		paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
				<f:facet name="header">Listado Planes de Vacunacion </f:facet>
				
				<p:column headerText="Nombre">
					<h:outputText value="#{enfermedad.nombre}" />
				</p:column>
				<p:column headerText="Fecha">
					<h:outputText value="#{enfermedad.fechaCreacion}" />
				</p:column>

				<f:facet name="footer">
					<div style="display: flex; align-items: center;justify-content: center;">
						<p:commandButton value="Buscar"
							actionListener="#{planVacunacionBean.reiniciarEnfermedad}"
							oncomplete="PF('enfermedadDialogBuscar').show()" />
						<p:spacer height="5px" />
						<p:commandButton value="Agregar Plan"
							actionListener="#{planVacunacionBean.reiniciarEnfermedad}"
							oncomplete="PF('planDialog').show()" />
					</div>
				</f:facet>
			</p:dataTable>
		</div>
	</h:form>

	<p:dialog id="planDlg" widgetVar="planDialog"
		header="Agregar Plan Vacunacion" modal="true" showEffect="fade"
		hideEffect="fade" resizable="false">

		<h:form id="dialogForm">
			
<p:panel header="Seleccionar Enfermedad " style="margin-bottom:10px;">
            <h:panelGrid columns="2" cellpadding="5">
                
                <p:selectOneMenu id="enfermedad" value="#{planVacunacionBean.nombreEnfermedad}" style="width:15rem">
                     
                     <p:ajax listener="#{planVacunacionBean.cargarVacunas}" update="Vac"/>
                    <f:selectItem itemLabel="Seleccionar Enfermedad" itemValue="" noSelectionOption="true"/>
                    <f:selectItems value="#{planVacunacionBean.enfermedades}"/>
                </p:selectOneMenu>

                <!-- <p:outputLabel for="Vac" value="Vacuna: "/>
                <p:selectOneMenu id="Vac" value="#{planVacunacionBean.nombreVacuna}" style="width:150px">
                    <f:selectItem itemLabel="Seleccionar Vacuna" itemValue="" noSelectionOption="true"/>
                    <f:selectItems value="#{planVacunacionBean.vacunas}"/>
                </p:selectOneMenu> -->
                
                <p:selectCheckboxMenu id="Vac" value="#{planVacunacionBean.nombreVacuna}" label="Seleccionar Vacunas" style="width: 15rem"
                                filter="true" filterMatchMode="startsWith" panelStyle="width: 15rem" scrollHeight="250">
            <f:selectItems value="#{planVacunacionBean.vacunas}"/>
        </p:selectCheckboxMenu>
            </h:panelGrid>
			
          

            <p:commandButton value="Submit" action="#{PlanVacunacionBean.cargarVacunas}"
                             icon="pi pi-check"/>
        </p:panel>
	
		</h:form>

	</p:dialog>

	<p:dialog id="enfermedadDlgBuscar" widgetVar="enfermedadDialogBuscar"
		header="Buscar Enfermedad" modal="true" showEffect="fade"
		hideEffect="fade" resizable="false">

		<h:form id="dialogFormBuscar">

			
		</h:form>

	</p:dialog>

</h:body>
</html>